# Gull Cannon

IoT project for saving a dock that needs saving.

# Setup
1. Add new project.
2. Enable Cloud Functions API
3. Setup Service account
- Create the service account
- Grant it Cloud Functions Admin role
- Create a key for the service account, and add the key as a repo secret to the repo, using the name GCP_SA_KEY



# OLD - UNUSED

I tried originally to use the terraform google cloud project factory, but found that its opinionation was slightly too far from the beaten path for me, at least insofar as my attempted integration with terraform cloud.

## APIs

Several APIs must be enabled on the project that manages the service account that will be running terraform, in addition to defaults.
- cloudbilling.googleapis.com
- cloudresourcemanager.googleapis.com
- iam.googleapis.com

## Permissions

Permissions Required for the Service Account used to Manage Terraform:
- https://registry.terraform.io/modules/terraform-google-modules/project-factory/google/latest#permissions

There is actually a helper script I found only later in the underlying github repo.

### Organization
- roles/resourcemanager.folderViewer
- roles/resourcemanager.organizationViewer
- roles/resourcemanager.projectCreator
- roles/billing.user

### Project
- roles/storage.admin

To create a storage account owned by a domain, the storage account must also be a verified owner of the domain (